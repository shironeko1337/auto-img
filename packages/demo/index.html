<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0">
  <title>AutoImg Demo</title>
  <link rel="stylesheet"
        href="/dist/styles.css">
</head>

<body>
  <div class="fx-ss w-full">

    <div id="menu"
         class="menu hover-lift-container bg1 h-[-webkit-fill-available] min-h-screen fxc-ss gap-6 w-[400px] overflow-auto ft-headline">
      <div class="fx-bc gap-8 w-full p-4">
        <div class="title ">
          <span>AutoImg</span>&nbsp;v<span>0.1</span>
          <iconify-icon class="text-xl"
                        icon="mdi:github"></iconify-icon>
          <iconify-icon class="text-xl cursor-pointer"
                        icon="line-md:light-dark"></iconify-icon>
        </div>
        <iconify-icon id="togglemenuicon"
                      class="icon cursor-pointer"
                      icon="icon-park-outline:left-c"></iconify-icon>
      </div>
      <div class="p-4 fxc-ss gap-4 w-full">
        <div><a href="#">Quick Start</a></div>
        <div><a href="#">Install</a></div>
        <div class="no-hover-lift fx-bc w-full controller"
             data-control="showcaseitems">
          <span>Showcase</span>
          <iconify-icon data-controller-icon
                        class="icon cursor-pointer"
                        icon="ic:baseline-expand-more"></iconify-icon>
        </div>
        <div class="no-hover-lift hover-lift-container controlled flex-col gap-4 pl-4"
             id="showcaseitems">
          <div><a href="#">Image with fixed size</a></div>
          <div><a href="#">Image filled in the container</a></div>
          <div><a href="#">Image staying focused when resizing</a></div>
        </div>
        <div class="menu-item-after-list"><a href="#">Playground</a></div>
        <div><a href="#">API</a></div>
      </div>
    </div>

    <div id="content"
         class="w-full min-h-screen fxc-sc">
      <div class="fxc-sc text-left w-[70%] gap-16">
        <div class="fxc-ss w-full gap-4">
          <div class="title font-medium">
            Showcase
          </div>
          <div class="desc">
            <p>
              Here are several examples using an 800 × 600 image of a predefined focus area.
            </p>
            <p>
              For all examples below, the image is not stretched, but with a super narrow container,
              there could be empty space on the border.
            </p>

          </div>
          <div class="fx-sc gap-4">
            <button class="btn btn-md hover-lift"
                    onclick="document.querySelector('#imagewithfixedsize-original').classList.toggle('hidden')">Toggle
              original image</button>
          </div>
        </div>
        <div class="fxc-cs gap-4 w-full hidden"
             id="imagewithfixedsize-original">
          <div class="title font-medium">Original Image with focus</div>
          <div class="relative"
               style="position:relative">
            <div class="absolute border-box"
                 style="left: 27px; top:235px; width: 425px; height: 255px; border: 2px solid springgreen;">
            </div>
            <img src="https://fastly.picsum.photos/id/200/800/600.jpg?hmac=wHrUWgaA9t7IwxTeGzmRrvvnBIMCFvJ29yZVL8dr8EE"
                 alt="Image not accessible"
                 width="800"
                 height="600" />
          </div>
        </div>
        <div class="fx-bc gap-20 w-full"
             id="imagewithfixedsize">
          <div class="fxc-ss max-w-[50vmin] gap-4">
            <div class="title font-medium">Image with fixed size</div>
            <div class="desc">Example usage in a 200 × 200 container.
            </div>
            <p>
            <pre><code class="language-html">&lt;auto-img
  src="https://fastly.picsum.photos/id/200/800/600.jpg?
  hmac=wHrUWgaA9t7IwxTeGzmRrvvnBIMCFvJ29yZVL8dr8EE"
  width="200"
  height="200"
  focus="27,235;452,490"
  padding="10"&gt;&lt;/auto-img&gt;</code></pre>
            </p>
          </div>
          <div class="fxc-cc">
            <div class="bordered">
              <auto-img src="https://fastly.picsum.photos/id/200/800/600.jpg?hmac=wHrUWgaA9t7IwxTeGzmRrvvnBIMCFvJ29yZVL8dr8EE"
                        width="200"
                        height="200"
                        focus="27,235;452,490"
                        padding="10"></auto-img>
            </div>
          </div>
        </div>

        <div class="fx-bc gap-20 w-full"
             id="imagefilledinthecontainer">
          <div class="fxc-ss max-w-[50vmin] gap-4">
            <div class="title font-medium">Image filled in the container</div>
            <div class="desc">Example usage in a container with uncertain size.
            </div>
            <p>
            <pre><code class="language-html">&lt;auto-img
  src="https://fastly.picsum.photos/id/200/800/600.jpg?
  hmac=wHrUWgaA9t7IwxTeGzmRrvvnBIMCFvJ29yZVL8dr8EE"
  focus="27,235;452,490"
  padding="10"&gt;&lt;/auto-img&gt;</code></pre>
            </p>
          </div>
          <div class="fxc-cc">
            <div style="display: flex; flex-direction: column; height: 300px;">
              <div class="bg-gray-200">Guess how high I am?</div>
              <div class="bordered"
                   style="width:100%;height:100%;">
                <auto-img src="https://fastly.picsum.photos/id/200/800/600.jpg?hmac=wHrUWgaA9t7IwxTeGzmRrvvnBIMCFvJ29yZVL8dr8EE"
                          focus="27,235;452,490"
                          padding="10"></auto-img>
              </div>
              <div class="bg-gray-200"
                   style="display: block; height: 100px;">Guess how high I am again? And what about
                width?</div>
            </div>
          </div>
        </div>
        <div class="fx-bc gap-20 w-full"
             id="imagestayingfocusedwhenresizing">
          <div class="fxc-ss max-w-[50vmin] gap-4">
            <div class="title font-medium">Image staying focused when resizing</div>
            <div class="desc">Example usage in a responsive container with
              <p>height of <input class="text-end w-[100px] bordered"
                       type="number"
                       value="200"
                       name="height"
                       onchange="document.querySelector('#resizablecontainer').style.height=this.value+'px'" />
                px and width of <input class="text-end w-[100px] bordered"
                       type="number"
                       value="200"
                       name="width"
                       onchange="document.querySelector('#resizablecontainer').style.width=this.value+'px'" />
                px. </p>
            </div>
            <p>
            <pre><code class="language-html">&lt;auto-img
  src="https://fastly.picsum.photos/id/200/800/600.jpg?
  hmac=wHrUWgaA9t7IwxTeGzmRrvvnBIMCFvJ29yZVL8dr8EE"
  focus="27,235;452,490"
  padding="10"&gt;&lt;/auto-img&gt;</code></pre>
            </p>
          </div>
          <div class="fxc-cc">
            <div id="resizablecontainer">
              <div class="bordered"
                   style="width:100%;height:100%;">
                <auto-img src="https://fastly.picsum.photos/id/200/800/600.jpg?hmac=wHrUWgaA9t7IwxTeGzmRrvvnBIMCFvJ29yZVL8dr8EE"
                          focus="27,235;452,490"
                          padding="10"></auto-img>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <link rel="preconnect"
        href="https://fonts.googleapis.com">
  <link rel="preconnect"
        href="https://fonts.gstatic.com"
        crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
  <!-- Prism.js for code highlighting (~6KB total for JS/TS/HTML) -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css"
        rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script
          src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script
          src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
  <script
          src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
  <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>
  <script src="/dist/auto-img-element.define.global.js"></script>
  <style>
    #resizablecontainer {
      width: 200px;
      height: 200px;
    }

    .hidden {
      display: none;
    }

    #menu span {
      cursor: default;
    }

    .controlled {
      overflow: hidden;
      height: 0;
      transition: height 0.5s ease;
    }

    .controlled.controlled-opened {
      display: flex;
      height: 7rem;
    }

    .reversed {
      transform: rotate(180deg);
    }

    #togglemenuicon {
      transition: transform, left 0.5s ease;
    }

    .toggle-menu-icon-detached {
      transform: rotate(180deg);
    }

    .controlled:not(.controlled-opened)~.menu-item-after-list {
      margin-top: -1.5rem;
    }

    .menu {
      transition: width 0.5s ease, opacity 0.5s ease;
      flex-shrink: 0;
      overflow: hidden;
      opacity: 1;
    }

    .menu.menu-closed {
      width: 0;
      opacity: 0;
    }
  </style>
  <script>
    const THEME_KEY = 'color-theme';
    const root = document.documentElement;

    const savedTheme = localStorage.getItem(THEME_KEY);

    if (savedTheme) {
      root.style.colorScheme = savedTheme;
    } else {
      root.style.colorScheme = 'light dark'; // Use system preference
    }

    document.addEventListener('DOMContentLoaded', () => {
      // toggle light & dark
      const toggle = document.querySelector('iconify-icon[icon="line-md:light-dark"]');
      if (toggle) {
        toggle.style.cursor = 'pointer';
        toggle.addEventListener('click', () => {
          const currentScheme = getComputedStyle(root).colorScheme;
          const isDark = currentScheme.includes('dark');
          const newTheme = isDark ? 'light' : 'dark';

          root.style.colorScheme = newTheme;
          localStorage.setItem(THEME_KEY, newTheme);
        });
      }

      // shrink/open sub menu
      document.querySelectorAll('.controller').forEach(e => {
        e.addEventListener('click', () => {
          document.querySelector(`#${e.getAttribute('data-control')}`)?.classList.toggle('controlled-opened');
          e.querySelector('[data-controller-icon]')?.classList.toggle('reversed');
        })
      })

      //shrink/open menu
      // we need it to be positioned as if it is in the original location but actually it's not
      const menuEl = document.querySelector('#menu');
      let menuOpened = true, toggleMenuLeft;
      const toggleMenuEl = document.querySelector('#togglemenuicon');
      const { left, top } = toggleMenuEl.getBoundingClientRect();
      toggleMenuEl.style.position = 'fixed';
      toggleMenuEl.style.top = top + 'px';
      toggleMenuLeft = toggleMenuEl.style.left = left + 'px';
      document.body.appendChild(toggleMenuEl)

      toggleMenuEl.addEventListener('click', () => {
        if (menuOpened) {
          toggleMenuEl.style.left = '50px';
        } else {
          toggleMenuEl.style.left = toggleMenuLeft;
        }

        menuEl.classList.toggle('menu-closed')
        toggleMenuEl.classList.toggle('reversed')
        menuOpened = !menuOpened;
      });
    });
  </script>
</body>

</html>
